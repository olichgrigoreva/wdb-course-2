{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\\\u0414\\u043C\\u0438\\u0442\\u0440\\u0438\\u0439\\\\Desktop\\\\wdb-project\\\\wdb-course-2\\\\Notebook\\\\note-r\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _objectWithoutProperties from \"C:\\\\Users\\\\\\u0414\\u043C\\u0438\\u0442\\u0440\\u0438\\u0439\\\\Desktop\\\\wdb-project\\\\wdb-course-2\\\\Notebook\\\\note-r\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";\nvar _jsxFileName = \"C:\\\\Users\\\\\\u0414\\u043C\\u0438\\u0442\\u0440\\u0438\\u0439\\\\Desktop\\\\wdb-project\\\\wdb-course-2\\\\Notebook\\\\note-r\\\\src\\\\components\\\\app\\\\app.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport NoteapiService from '../../services';\nimport AppHeader from '../app-header';\nimport TodoList from '../todo-list';\nimport SearchPanel from '../search-panel';\nimport ItemStatusFilter from '../item-status-filter';\nimport AddNoteToggle from '../add-note-toggle';\nimport ItemAddForm from '../item-add-form';\nimport ItemDetalis from '../item-detalis';\nimport AlertModal from '../alert-modal';\nimport NoteHeader from '../note-header';\nimport NoteFooter from '../note-footer';\nimport './app.css';\nexport default class App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.maxId = 100;\n    this.state = {\n      items: [{\n        id: 1,\n        label: 'Drink Coffee',\n        date: '',\n        text: '',\n        important: false,\n        done: false\n      }, {\n        id: 2,\n        label: 'Learn React',\n        date: '',\n        text: '',\n        important: true,\n        done: false\n      }, {\n        id: 3,\n        label: 'Make Awesome App',\n        date: '15/2/3',\n        text: 'aaa',\n        important: false,\n        done: false\n      }],\n      isOpen: false,\n      itemUpdate: false,\n      ItemAddedToggle: false,\n      deleteItem: null,\n      filter: 'all',\n      search: '',\n      ItemId: null\n    };\n\n    this.itemUpdate = item => {\n      const idx = this.findIndex(item, this.state.items);\n      const _this$state$items$idx = this.state.items[idx],\n            id = _this$state$items$idx.id,\n            label = _this$state$items$idx.label,\n            date = _this$state$items$idx.date,\n            text = _this$state$items$idx.text;\n      this.setState({\n        itemUpdate: {\n          id,\n          label,\n          date,\n          text\n        }\n      });\n    };\n\n    this.onToggleAdd = () => {\n      this.setState(({\n        ItemAddedToggle\n      }) => {\n        return {\n          ItemAddedToggle: !ItemAddedToggle,\n          itemUpdate: false\n        };\n      });\n    };\n\n    this.modalToggleOff = () => {\n      this.setState({\n        isOpen: false\n      });\n    };\n\n    this.modalToggleOn = id => {\n      this.setState(({\n        isOpen,\n        deleteItem,\n        items\n      }) => {\n        const idx = this.findIndex(id, items);\n        const oldItem = items[idx].label;\n        return {\n          isOpen: true,\n          deleteItem: oldItem,\n          ItemId: id\n        };\n      });\n    };\n\n    this.onItemAdded = (label, date, text) => {\n      const item = this.createItem(label, date, text);\n\n      if (this.state.itemUpdate) {\n        console.log(this.state.itemUpdate);\n        /*\n        axios.post('http://wdb.virtual/wdb-course-2/Notebook/Api/update_note.php', delItem)\n            .then(res => console.log(res.data));\n        */\n\n        this.setState((_ref) => {\n          let itemUpdate = _ref.itemUpdate,\n              itemId = _ref.itemId,\n              state = _objectWithoutProperties(_ref, [\"itemUpdate\", \"itemId\"]);\n\n          const idx = this.findIndex(itemUpdate.id, state.items);\n          const items = [...state.items.slice(0, idx), item, ...state.items.slice(idx + 1)];\n          return {\n            ItemId: itemUpdate.id,\n            items,\n            itemUpdate: false,\n            ItemAddedToggle: false\n          };\n        });\n      } else {\n        this.setState(state => {\n          return {\n            items: [...state.items, item],\n            itemUpdate: false,\n            ItemAddedToggle: true\n          };\n        });\n      }\n    };\n\n    this.onItemSelected = ItemId => {\n      this.setState({\n        ItemId,\n        itemUpdate: false,\n        ItemAddedToggle: false\n      });\n    };\n\n    this.itemData = (item, id) => {\n      const idx = this.findIndex(id, item);\n\n      if (idx === -1) {\n        return false;\n      }\n\n      const _item$idx = item[idx],\n            label = _item$idx.label,\n            date = _item$idx.date,\n            text = _item$idx.text;\n      return {\n        label,\n        date,\n        text\n      };\n    };\n\n    this.toggleProperty = (arr, id, propName) => {\n      const idx = this.findIndex(id, arr);\n      const oldItem = arr[idx];\n      const value = !oldItem[propName];\n\n      const item = _objectSpread({}, arr[idx], {\n        [propName]: value\n      });\n\n      return [...arr.slice(0, idx), item, ...arr.slice(idx + 1)];\n    };\n\n    this.onToggleDone = id => {\n      this.setState(state => {\n        const items = this.toggleProperty(state.items, id, 'done');\n        return {\n          items\n        };\n      });\n    };\n\n    this.onToggleImportant = id => {\n      this.setState(state => {\n        const items = this.toggleProperty(state.items, id, 'important');\n        return {\n          items\n        };\n      });\n    };\n\n    this.onDelete = () => {\n      const delItem = {\n        id: this.state.ItemId\n      };\n      axios.post('http://wdb.virtual/wdb-course-2/Notebook/Api/delete_note.php', delItem).then(res => console.log(res.data));\n      this.setState((_ref2) => {\n        let isOpen = _ref2.isOpen,\n            ItemId = _ref2.ItemId,\n            state = _objectWithoutProperties(_ref2, [\"isOpen\", \"ItemId\"]);\n\n        const idx = this.findIndex(ItemId, state.items);\n        const items = [...state.items.slice(0, idx), ...state.items.slice(idx + 1)];\n        return {\n          items,\n          isOpen: !isOpen\n        };\n      });\n    };\n\n    this.findIndex = (id, item) => {\n      const idx = item.findIndex(item => item.id === id);\n      return idx;\n    };\n\n    this.onFilterChange = filter => {\n      this.setState({\n        filter\n      });\n    };\n\n    this.onSearchChange = search => {\n      this.setState({\n        search\n      });\n    };\n  }\n\n  createItem(label, date, text) {\n    return {\n      id: ++this.maxId,\n      label,\n      date,\n      text,\n      important: false,\n      done: false\n    };\n  }\n\n  filterItems(items, filter) {\n    if (filter === 'all') {\n      return items;\n    } else if (filter === 'active') {\n      return items.filter(item => !item.done);\n    } else if (filter === 'done') {\n      return items.filter(item => item.done);\n    }\n  }\n\n  searchItems(items, search) {\n    if (search.length === 0) {\n      return items;\n    }\n\n    return items.filter(item => {\n      return item.label.toLowerCase().indexOf(search.toLowerCase()) > -1;\n    });\n  }\n\n  render() {\n    const _this$state = this.state,\n          items = _this$state.items,\n          filter = _this$state.filter,\n          search = _this$state.search,\n          ItemId = _this$state.ItemId,\n          deleteItem = _this$state.deleteItem,\n          isOpen = _this$state.isOpen,\n          ItemAddedToggle = _this$state.ItemAddedToggle,\n          itemUpdate = _this$state.itemUpdate;\n    const doneCount = items.filter(item => item.done).length;\n    const toDoCount = items.length - doneCount;\n    const visibleItems = this.searchItems(this.filterItems(items, filter), search);\n    const selectItem = ItemId ? this.itemData(items, ItemId) : '';\n    const item = ItemAddedToggle || itemUpdate ? React.createElement(ItemAddForm, {\n      onItemAdded: this.onItemAdded,\n      itemUpdate: itemUpdate,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    }) : React.createElement(ItemDetalis, {\n      item: selectItem,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238\n      },\n      __self: this\n    });\n    return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }, React.createElement(NoteHeader, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"row mb2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"todo-app\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, React.createElement(AppHeader, {\n      toDo: toDoCount,\n      done: doneCount,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"search-panel d-flex\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252\n      },\n      __self: this\n    }, React.createElement(SearchPanel, {\n      onSearchChange: this.onSearchChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    }), React.createElement(ItemStatusFilter, {\n      filter: filter,\n      onFilterChange: this.onFilterChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256\n      },\n      __self: this\n    })), React.createElement(TodoList, {\n      items: visibleItems,\n      onItemSelected: this.onItemSelected,\n      onToggleImportant: this.onToggleImportant,\n      onToggleDone: this.onToggleDone,\n      modalToggleOn: this.modalToggleOn,\n      itemUpdate: this.itemUpdate,\n      onDelete: this.onDelete,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }), React.createElement(AddNoteToggle, {\n      onToggleAdd: this.onToggleAdd,\n      ItemAddedToggle: ItemAddedToggle,\n      itemUpdate: itemUpdate,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"col-md-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"todo-app\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276\n      },\n      __self: this\n    }, item), React.createElement(AlertModal, {\n      modalToggleOn: this.modalToggleOn,\n      modalToggleOff: this.modalToggleOff,\n      onDelete: this.onDelete,\n      isOpen: isOpen,\n      ItemId: ItemId,\n      deleteItem: deleteItem,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279\n      },\n      __self: this\n    }))));\n  }\n\n}","map":{"version":3,"sources":["C:\\Users\\Дмитрий\\Desktop\\wdb-project\\wdb-course-2\\Notebook\\note-r\\src\\components\\app\\app.js"],"names":["React","Component","axios","NoteapiService","AppHeader","TodoList","SearchPanel","ItemStatusFilter","AddNoteToggle","ItemAddForm","ItemDetalis","AlertModal","NoteHeader","NoteFooter","App","maxId","state","items","id","label","date","text","important","done","isOpen","itemUpdate","ItemAddedToggle","deleteItem","filter","search","ItemId","item","idx","findIndex","setState","onToggleAdd","modalToggleOff","modalToggleOn","oldItem","onItemAdded","createItem","console","log","itemId","slice","onItemSelected","itemData","toggleProperty","arr","propName","value","onToggleDone","onToggleImportant","onDelete","delItem","post","then","res","data","onFilterChange","onSearchChange","filterItems","searchItems","length","toLowerCase","indexOf","render","doneCount","toDoCount","visibleItems","selectItem"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\n\nimport NoteapiService from '../../services'\nimport AppHeader from '../app-header';\nimport TodoList from '../todo-list';\nimport SearchPanel from '../search-panel';\nimport ItemStatusFilter from '../item-status-filter';\nimport AddNoteToggle from '../add-note-toggle';\nimport ItemAddForm from '../item-add-form';\nimport ItemDetalis from '../item-detalis';\nimport AlertModal from '../alert-modal';\nimport NoteHeader from '../note-header';\nimport NoteFooter from '../note-footer';\n\nimport './app.css';\n\nexport default class App extends Component {\n\n  maxId = 100;\n\n  state = {\n    items: [\n      { id: 1, label: 'Drink Coffee', date: '', text: '', important: false, done: false },\n      { id: 2, label: 'Learn React', date: '', text: '', important: true, done: false },\n      { id: 3, label: 'Make Awesome App', date: '15/2/3', text: 'aaa', important: false, done: false }\n    ],\n    isOpen: false,\n    itemUpdate: false,\n    ItemAddedToggle: false,\n    deleteItem: null,\n    filter: 'all',\n    search: '',\n    ItemId: null,\n  };\n\n  itemUpdate = (item) => {\n    const idx = this.findIndex(item, this.state.items);\n    const {id, label, date, text} = this.state.items[idx];\n    this.setState({\n        itemUpdate: {\n            id,\n            label,\n            date, \n            text\n        } \n    })\n  }\n\n  onToggleAdd = () => {\n      this.setState(({ItemAddedToggle}) => {\n        return {\n            ItemAddedToggle: !ItemAddedToggle,\n            itemUpdate: false\n        }\n      })\n  }\n\n  modalToggleOff = () => {\n      this.setState({isOpen: false})\n  }\n\n  modalToggleOn = (id) => {\n    this.setState(({isOpen, deleteItem, items}) => {\n        const idx = this.findIndex(id, items);\n        const oldItem = items[idx].label\n        return ({\n            isOpen: true,\n            deleteItem: oldItem,\n            ItemId: id\n        });\n    })\n  }\n\n  onItemAdded = (label, date, text) => {\n\n    const item = this.createItem(label, date, text);\n\n    if(this.state.itemUpdate) {\n\n        console.log(this.state.itemUpdate);\n        /*\n        axios.post('http://wdb.virtual/wdb-course-2/Notebook/Api/update_note.php', delItem)\n            .then(res => console.log(res.data));\n        */\n        this.setState(({ itemUpdate, itemId, ...state}) => {\n            const idx = this.findIndex(itemUpdate.id, state.items);\n            const items = [\n                ...state.items.slice(0, idx),\n                item,\n                ...state.items.slice(idx + 1)\n              ];\n\n            return {\n                ItemId: itemUpdate.id,\n                items,\n                itemUpdate: false,\n                ItemAddedToggle: false \n            }\n        })    \n    } else {\n        this.setState((state) => {\n          return { \n              items: [...state.items, item],\n              itemUpdate: false,\n              ItemAddedToggle: true \n            };\n        })\n    }\n  };\n\n  onItemSelected = (ItemId) => {\n    this.setState({ \n        ItemId,\n        itemUpdate: false,\n        ItemAddedToggle: false\n     });\n  }\n\n  itemData = (item, id) => {\n    const idx = this.findIndex(id, item);\n\n    if(idx === -1) {\n      return false;\n    }\n\n    const { label, date, text } = item[idx];\n\n    return {\n      label, \n      date,\n      text\n    };\n  }\n\n  toggleProperty = (arr, id, propName) => {\n    const idx = this.findIndex(id, arr);\n    const oldItem = arr[idx];\n    const value = !oldItem[propName];\n\n    const item = { ...arr[idx], [propName]: value } ;\n    return [\n      ...arr.slice(0, idx),\n      item,\n      ...arr.slice(idx + 1)\n    ];\n  };\n\n  onToggleDone = (id) => {\n    this.setState((state) => {\n      const items = this.toggleProperty(state.items, id, 'done');\n      return { items };\n    });\n  };\n\n  onToggleImportant = (id) => {\n    this.setState((state) => {\n      const items = this.toggleProperty(state.items, id, 'important');\n      return { items };\n    });\n  };\n\n  onDelete = () => {\n\n    const delItem = {\n      id: this.state.ItemId\n    }\n\n    axios.post('http://wdb.virtual/wdb-course-2/Notebook/Api/delete_note.php', delItem)\n      .then(res => console.log(res.data));\n\n    this.setState(({isOpen, ItemId, ...state}) => {\n      const idx = this.findIndex(ItemId, state.items);\n       \n      const items = [\n        ...state.items.slice(0, idx),\n        ...state.items.slice(idx + 1)\n      ];\n      return { items, isOpen: !isOpen};\n    });\n  };\n\n  findIndex = (id, item) => {\n    const idx = item.findIndex((item) => item.id === id);\n\n    return idx;\n  }\n\n  onFilterChange = (filter) => {\n    this.setState({ filter });\n  };\n\n  onSearchChange = (search) => {\n    this.setState({ search });\n  };\n\n  createItem(label, date, text) {\n    return {\n      id: ++this.maxId,\n      label,\n      date,\n      text,\n      important: false,\n      done: false\n    };\n  }\n\n  filterItems(items, filter) {\n    if (filter === 'all') {\n      return items;\n    } else if (filter === 'active') {\n      return items.filter((item) => (!item.done));\n    } else if (filter === 'done') {\n      return items.filter((item) => item.done);\n    }\n  }\n\n  searchItems(items, search) {\n    if (search.length === 0) {\n      return items;\n    }\n\n    return items.filter((item) => {\n      return item.label.toLowerCase().indexOf(search.toLowerCase()) > -1;\n    });\n  }\n\n  render() {\n    const { items, filter, search, ItemId, deleteItem, isOpen, \n            ItemAddedToggle, itemUpdate } = this.state;\n\n    const doneCount = items.filter((item) => item.done).length;\n    const toDoCount = items.length - doneCount;\n    const visibleItems = this.searchItems(this.filterItems(items, filter), search);\n    const selectItem = ItemId ? this.itemData(items, ItemId):'';\n    const item = (ItemAddedToggle || itemUpdate) ? \n    <ItemAddForm onItemAdded={this.onItemAdded} itemUpdate={itemUpdate}/> :\n    <ItemDetalis item={ selectItem } />;\n\n    return (\n    <>\n      <div className = \"row\">\n          <div className= \"col\">\n            <NoteHeader />\n          </div>\n      </div>\n      <div className=\"row mb2\">\n        <div className=\"col-md-6\">\n            <div className=\"todo-app\">\n                <AppHeader toDo={toDoCount} done={doneCount}/>\n\n                <div className=\"search-panel d-flex\">\n                    <SearchPanel\n                        onSearchChange={this.onSearchChange}/>\n\n                    <ItemStatusFilter\n                        filter={filter}\n                        onFilterChange={this.onFilterChange} />\n                </div>\n\n                    <TodoList\n                        items={ visibleItems }\n                        onItemSelected = {this.onItemSelected}\n                        onToggleImportant={this.onToggleImportant}\n                        onToggleDone={this.onToggleDone}\n                        modalToggleOn={this.modalToggleOn}\n                        itemUpdate={this.itemUpdate}\n                        onDelete={this.onDelete} />\n\n                    <AddNoteToggle onToggleAdd={this.onToggleAdd} \n                                   ItemAddedToggle={ItemAddedToggle}\n                                   itemUpdate={itemUpdate}/>\n                </div>\n        </div>\n        <div className=\"col-md-6\">\n            <div className=\"todo-app\">\n                {item}\n            </div>\n            <AlertModal\n                modalToggleOn={this.modalToggleOn} \n                modalToggleOff = {this.modalToggleOff} \n                onDelete={this.onDelete} \n                isOpen={isOpen} \n                ItemId={ItemId} \n                deleteItem={deleteItem} />\n        </div >\n      </div>\n    </>\n    );\n  };\n}\n"]},"metadata":{},"sourceType":"module"}