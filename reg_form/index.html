<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <title>Регистрация</title>
    <script>
      document.addEventListener("DOMContentLoaded", function() {
        let header = document.createElement("header");
          document.querySelector("body").append(header);
          header.append("HEADER");
          header.className = "bg-secondary p-4 text-center";

        let divform = document.createElement("div");
          document.querySelector("body").append(divform);
          divform.classList.add("container");

        let result = document.createElement("div");
          document.querySelector("body").append(result);
          result.className = "result p-5 text-center";

        let footer = document.createElement("footer");
          document.querySelector("body").append(footer);
          footer.append("FOOTER");
          footer.className = "fixed-bottom bg-secondary p-1 text-center";

        let form = document.createElement("form");
          form.className = "col-sm-7 col-lg-3 mx-auto";
          divform.append(form);

        function createElementForm (elementName, tagName, type, placeholder, className) {
          elementName.type = type;
          elementName.name = tagName;
          elementName.placeholder = placeholder;
          elementName.className = className;
          form.append(elementName);
        }

        let username = document.createElement("input");
          createElementForm (username, "username", "text", "введите логин", "form-control mt-5 mb-2 shadow-sm");

        let email = document.createElement("input");
          createElementForm (email, "email", "text", "введите емэйл", "form-control mb-2 shadow-sm");

        let password = document.createElement("input");
          createElementForm (password, "password", "password", "пароль", "form-control mb-2 shadow-sm");

        let confirmpassword = document.createElement("input");
          createElementForm (confirmpassword, "confirmpassword", "password", "повторите пароль", "form-control mb-4 shadow-sm");

        let registerbutton = document.createElement("button");
          createElementForm (registerbutton, "registerbutton", "button", "", "form-control btn btn-primary");
          let registerbuttontext = document.createTextNode("register");
          registerbutton.append(registerbuttontext);

        registerbutton.addEventListener ("click", function verify(event) {
          event.preventDefault();
          if (!username.value) {alert("Введите логин")}
          if (!email.value.includes("@")) {alert("Введите емэйл")}
          if (!password.value) {alert("введите пароль")}
          if (!(password.value == confirmpassword.value)) {alert("Пароли не совпадают")}
          if (username.value && email.value && password.value && (password.value == confirmpassword.value)) {
            let form = document.querySelector("form");
            fetch("script.php", {
              method: "POST",
              body: new FormData(form)
              })
              .then(response => {
                return response.text();
              })
              .then(text => {
                document.querySelector(".result").innerHTML = text;
              })
          }
        })
      })
    </script>
  </head>
  <body>
  </body>
</html>
