В таблице поле "usernames" имеет индекс UNIQUE, поэтому дублирования записей не происходит.
Программа выполняется без ошибок, но записи в таблицу не происходит. При этом индексы в таблице засчитываются, даже если запись не была сделана.